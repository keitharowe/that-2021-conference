{"tasks":[{"environment":{},"displayName":"IIS Web App Manage","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"EnableIIS":"true","IISDeploymentType":"IISWebsite","ActionIISWebsite":"CreateOrUpdateWebsite","ActionIISApplicationPool":"CreateOrUpdateAppPool","StartStopWebsiteName":"$(client)-$(project)","WebsiteName":"$(client)-$(project)","WebsitePhysicalPath":"$(physicalPath)","WebsitePhysicalPathAuth":"WebsiteUserPassThrough","WebsiteAuthUserName":"","WebsiteAuthUserPassword":"","AddBinding":"false","Protocol":"http","IPAddress":"All Unassigned","Port":"","ServerNameIndication":"false","HostNameWithOutSNI":"","HostNameWithHttp":"","HostNameWithSNI":"","SSLCertThumbPrint":"","Bindings":"","CreateOrUpdateAppPoolForWebsite":"true","ConfigureAuthenticationForWebsite":"false","AppPoolNameForWebsite":"$(AppPoolName)","DotNetVersionForWebsite":"v4.0","PipeLineModeForWebsite":"Integrated","AppPoolIdentityForWebsite":"ApplicationPoolIdentity","AppPoolUsernameForWebsite":"","AppPoolPasswordForWebsite":"","AnonymousAuthenticationForWebsite":"false","BasicAuthenticationForWebsite":"false","WindowsAuthenticationForWebsite":"true","ParentWebsiteNameForVD":"$(client)-$(project)","VirtualPathForVD":"/","PhysicalPathForVD":"%SystemDrive%\\inetpub\\wwwroot","VDPhysicalPathAuth":"VDUserPassThrough","VDAuthUserName":"","VDAuthUserPassword":"","ParentWebsiteNameForApplication":"$(client)-$(project)","VirtualPathForApplication":"/","PhysicalPathForApplication":"E:\\www\\$(client)-$(project)\\www","ApplicationPhysicalPathAuth":"ApplicationUserPassThrough","ApplicationAuthUserName":"","ApplicationAuthUserPassword":"","CreateOrUpdateAppPoolForApplication":"true","AppPoolNameForApplication":"$(client)-$(project)-pool","DotNetVersionForApplication":"v4.0","PipeLineModeForApplication":"Integrated","AppPoolIdentityForApplication":"ApplicationPoolIdentity","AppPoolUsernameForApplication":"","AppPoolPasswordForApplication":"","AppPoolName":"$(client)-$(project)","DotNetVersion":"v4.0","PipeLineMode":"Integrated","AppPoolIdentity":"ApplicationPoolIdentity","AppPoolUsername":"","AppPoolPassword":"","StartStopRecycleAppPoolName":"","AppCmdCommands":""},"task":{"id":"1b2aec60-dc49-11e6-9b76-63056e018cac","versionSpec":"0.*","definitionType":"task"}},{"environment":{},"displayName":"IIS Web App Binding","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"targetType":"filePath","filePath":"$(Global_ScriptsDeploymentDirectory)IISWebAppBinding.ps1","arguments":"-websiteName \"$(WebsiteName)\" -bindingIpAddress \"$(bindingIPAddress)\" -hostHeader \"$(hostHeader)\" -project \"$(project)\"","script":"","errorActionPreference":"stop","failOnStderr":"false","showWarnings":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":"","runScriptInSeparateScope":"false"},"task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"IIS Web App SSL","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"targetType":"filePath","filePath":"$(Global_ScriptsDeploymentDirectory)IISWebAppSSL.ps1","arguments":"-websiteName \"$(WebsiteName)\" -appPoolName \"$(AppPoolName)\" -sslCertName \"$(sslCertName)\" -bindingIpAddress \"$(bindingIPAddress)\" -sslCertStore \"$(sslCertStore)\"","script":"","errorActionPreference":"stop","failOnStderr":"false","showWarnings":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":"","runScriptInSeparateScope":"false"},"task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"IIS Web App Permissions","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"targetType":"filePath","filePath":"$(Global_ScriptsDeploymentDirectory)IISWebAppPermissions.ps1","arguments":"-websiteName \"$(WebsiteName)\" -appPoolName \"$(AppPoolName)\"","script":"","errorActionPreference":"stop","failOnStderr":"false","showWarnings":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":"","runScriptInSeparateScope":"false"},"task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"SQL Web App Create and Permissions","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"targetType":"filePath","filePath":"$(Global_ScriptsDeploymentDirectory)SQLWebAppCreate.ps1","arguments":"-sqlDatabaseName '$(sqlDatabaseName)' -appPoolName '$(AppPoolName)' -sqlInstance '$(sqlInstance)' -releaseEnvironmentName '$(release.EnvironmentName)' -sqlUsername '$(sqlUsername)' -sqlPassword '$(sqlPassword)' -defaultWorkingDirectory '$(System.DefaultWorkingDirectory)'","script":"# Write your PowerShell commands here.\n\nWrite-Host \"Hello World\"\n","errorActionPreference":"stop","failOnStderr":"true","showWarnings":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":"","runScriptInSeparateScope":"false"},"task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"IIS Web App Deploy","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"WebSiteName":"$(WebsiteName)","VirtualApplication":"","Package":"$(System.DefaultWorkingDirectory)\\**\\*.zip","SetParametersFile":"","RemoveAdditionalFilesFlag":"false","ExcludeFilesFromAppDataFlag":"true","TakeAppOfflineFlag":"true","AdditionalArguments":"-skip:objectName=dirPath,absolutePath='$(client)-$(project)\\\\media$' -skip:objectName=dirPath,absolutePath='$(client)-$(project)\\\\usync$'  -skip:objectName=dirPath,absolutePath='$(client)-$(project)\\\\sites$' -skip:objectName=dirPath,absolutePath='$(client)-$(project)\\\\wp-content$' -useChecksum","XmlTransformation":"false","XmlVariableSubstitution":"false","JSONFiles":"**/appsettings.json"},"task":{"id":"1b467810-6725-4b6d-accd-886174c09bba","versionSpec":"0.*","definitionType":"task"}},{"environment":{},"displayName":"IIS Web App Cleanup","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"inputs":{"targetType":"filePath","filePath":"$(Global_ScriptsDeploymentDirectory)IISWebAppCleanup.ps1","arguments":"-physicalPath \"$(physicalPath)\"","script":"","errorActionPreference":"stop","failOnStderr":"false","showWarnings":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":"","runScriptInSeparateScope":"false"},"task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"2.*","definitionType":"task"}}],"runsOn":["Agent","DeploymentGroup"],"revision":6,"createdBy":{"displayName":"Keith Rowe","id":"78c26675-9814-6659-a4f9-543855ab4b0d","uniqueName":"krowe@aztekweb.com"},"createdOn":"2021-07-27T18:29:23.443Z","modifiedBy":{"displayName":"Keith Rowe","id":"78c26675-9814-6659-a4f9-543855ab4b0d","uniqueName":"krowe@aztekweb.com"},"modifiedOn":"2021-07-27T18:29:47.993Z","comment":"Published preview","id":"717c3b75-58dc-4163-9cba-cdeb7273ce95","name":"THAT - .NET 5 Aztek IIS Deployment Dev, UAT, Staging for Production ","version":{"major":2,"minor":0,"patch":0,"isTest":false},"iconUrl":"/aztek-internal/_static/tfs/M176_20201007.10/_content/icon-meta-task.png","friendlyName":"THAT - .NET 5 Aztek IIS Deployment Dev, UAT, Staging for Production ","description":"THAT conf IIS deployment for development, UAT and Staging for Production!","category":"Deploy","definitionType":"metaTask","author":"Keith Rowe","demands":[],"groups":[],"inputs":[{"aliases":[],"options":{},"properties":{},"name":"AppPoolName","label":"AppPoolName","defaultValue":"$(client)-$(project)","required":true,"type":"string","helpMarkDown":"Provide the name of the IIS application pool to create or update.","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"bindingIPAddress","label":"bindingIPAddress","defaultValue":"$(bindingIPAddress)","required":true,"type":"string","helpMarkDown":"Map to global library and scope variable ","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"client","label":"client","defaultValue":"$(client)","required":true,"type":"string","helpMarkDown":"Client Name","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"Global_ScriptsDeploymentDirectory","label":"Global_ScriptsDeploymentDirectory","defaultValue":"$(Global_ScriptsDeploymentDirectory)","required":true,"type":"string","helpMarkDown":"Scripts installation directory","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"hostHeader","label":"hostHeader","defaultValue":"$(hostHeader)","required":true,"type":"string","helpMarkDown":"Map to global library and scope variable ","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"physicalPath","label":"physicalPath","defaultValue":"$(physicalPath)","required":true,"type":"string","helpMarkDown":"Provide the physical path where the website content will be stored. The content can reside on the local Computer, or in a remote directory, or on a network share, like C:\\Fabrikam or \\\\\\\\ContentShare\\Fabrikam.","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"project","label":"project","defaultValue":"$(project)","required":true,"type":"string","helpMarkDown":"Client Project typically the URL","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"sqlDatabaseName","label":"sqlDatabaseName","defaultValue":"$(sqlDatabaseName)","required":true,"type":"string","helpMarkDown":"Name of the database to be created, typically { Client Name} . Umbraco","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"sqlInstance","label":"sqlInstance","defaultValue":"","required":true,"type":"string","helpMarkDown":"Dev or Uat Server and Instance Name so .\\Dev19 or .\\Uat17 if prod  Aztek-SQL01-2016\\PROD_14","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"sqlPassword","label":"sqlPassword","defaultValue":"$(sqlPassword)","required":true,"type":"string","helpMarkDown":"Set in the Azure Library - via Vault","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"sqlUsername","label":"sqlUsername","defaultValue":"$(sqlUsername)","required":true,"type":"string","helpMarkDown":"Set in the Azure Library - via Vault","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"sslCertName","label":"sslCertName","defaultValue":"$(sslCertName)","required":true,"type":"string","helpMarkDown":"Map to global library and scope variable ","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"sslCertStore","label":"sslCertStore","defaultValue":"WebHosting","required":true,"type":"string","helpMarkDown":"Default certificate store or might be Personal","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"WebsiteName","label":"WebsiteName","defaultValue":"$(client)-$(project)","required":true,"type":"string","helpMarkDown":"Website Name typically the client - project","groupName":""}],"satisfies":[],"sourceDefinitions":[],"dataSourceBindings":[],"instanceNameFormat":"Task group: THAT - .NET 5 Aztek IIS Deployment Dev, UAT, Staging for Production  $(AppPoolName)","preJobExecution":{},"execution":{},"postJobExecution":{}}